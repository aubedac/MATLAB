%% 29/02/2016 Problema Metro distric Water (Si tenemos exceso de demanda utilizamos todos los recursos)
% min Z = [16x11 + 13x12 + 2x13 + 17x14 + 14x21 + 13x22 + 19x23 + 15x24 + 19x31 + 20x32 + 23x33 + Mx34
% s.t:
% x11 + x12 + x13 + x14 = 50
% x21 + x22 + x23 + x24 = 60
% x31 + x32 + x33 + x34 = 50
% 
% x11 + x21 + x21 >= 30       x13 + x23 + x33 >= 0
% x11 + x21 + x21 <= 50       x13 + x23 + x33 <= 30
% 
% x12 + x22 + x32 <= 70       x14 + x24 + x34 >= 10
% x12 + x22 + x32 >= 70

%% Resolucion:
%   x11  x12  x13  x14  x21  x22  x23  x24  x31  x32  x33  x34
M = 99999;
f=[ 16   13   22   17   14   13   19   15   19   20   23   M];

Aeq=[1    1    1    1    0    0    0    0    0   0    0    0
     0    0    0    0    1    1    1    1    0   0    0    0
     0    0    0    0    0    0    0    0    1   1    1    1];
 
beq=[50; 60; 50];

A=[ -1     0    0    0    -1     0    0    0   -1   0    0    0
     1     0    0    0     1     0    0    0    1   0    0    0
     0    -1    0    0     0    -1    0    0    0  -1    0    0
     0     1    0    0     0     1    0    0    0   1    0    0
     0     0    1    0     0     0    1    0    0   0    1    0
     0     0   -1    0     0     0   -1    0    0   0   -1    0
     0     0    0   -1     0     0    0   -1    0   0    0   -1];
 
 b=[-30;50;-70;70;0;30;-10];
  
  lb = zeros(12,1);
  ub = [inf inf inf inf inf inf inf inf inf inf inf inf];
  [x,fval] = linprog(f,A,b,Aeq,beq,lb,ub)
%% Solucion:
%  x =
%     0.0000
%    50.0000
%     0.0000
%     0.0000
%     0.0000
%    20.0000
%     0.0000
%    40.0000
%    50.0000
%     0.0000
%     0.0000
%     0.0000
% fval =
%    2.4600e+03 